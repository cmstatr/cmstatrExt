<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="cmstatrExt">
<title>Equivalency Factor Calculator • cmstatrExt</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Equivalency Factor Calculator">
<meta property="og:description" content="cmstatrExt">
<meta property="og:image" content="https://cmstatrExt.cmstatr.net/reference/figures/logo-240x278.png">
<meta property="og:image:alt" content="More statistical methods for composite material data: cmstatrExt">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">cmstatrExt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/equivalency-p-values.html">p-Values for Equivalency</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Calculators</h6>
    <a class="dropdown-item" href="../articles/compute-equiv-factors.html">Equivalency Factor Calculator</a>
    <a class="dropdown-item" href="../articles/compute-p-value-equiv.html">Equivalency p-Value Calculator</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cmstatr/cmstatrExt/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Equivalency Factor Calculator</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cmstatr/cmstatrExt/blob/HEAD/vignettes/articles/compute-equiv-factors.Rmd" class="external-link"><code>vignettes/articles/compute-equiv-factors.Rmd</code></a></small>
      <div class="d-none name"><code>compute-equiv-factors.Rmd</code></div>
    </div>

    
    
<p>This page provides an online calculator to determine two-sample
equivalency factors. This calculator gives the factors <span class="math inline">\(k_1\)</span> and <span class="math inline">\(k_2\)</span> as well as determining the power of
the test for detecting reduction in mean. The basis of this method is
the following paper. More details are given at the bottom of this
page.</p>
<p>S. Kloppenborg, “Lot acceptance testing using sample mean and
extremum with finite qualification samples,” Journal of Quality
Technology, 2023. <a href="https://doi.org/10.1080/00224065.2022.2147884" class="external-link">DOI:
10.1080/00224065.2022.2147884</a></p>
<p><em>This calculator is provided as-is without any warranty. Users are
advised to review the code to verify correctness.</em></p>
<div class="section level2">
<h2 id="calculator">Calculator<a class="anchor" aria-label="anchor" href="#calculator"></a>
</h2>
<div class="section level3">
<h3 id="input">Input<a class="anchor" aria-label="anchor" href="#input"></a>
</h3>
<style>
  .emscripten { padding-right: 0; margin-left: auto; margin-right: auto; display: block; }
  textarea.emscripten { font-family: monospace; width: 80%; }
  div.emscripten { text-align: center; }
  div.emscripten_border { border: 1px solid black; }
  /* the canvas *must not* have any border or padding, or mouse coords will be wrong */
  canvas.emscripten { border: 0px none; background-color: black; }

  .spinner {
    height: 50px;
    width: 50px;
    margin: 0px auto;
    -webkit-animation: rotation .8s linear infinite;
    -moz-animation: rotation .8s linear infinite;
    -o-animation: rotation .8s linear infinite;
    animation: rotation 0.8s linear infinite;
    border-left: 10px solid rgb(0,150,240);
    border-right: 10px solid rgb(0,150,240);
    border-bottom: 10px solid rgb(0,150,240);
    border-top: 10px solid rgb(100,0,200);
    border-radius: 100%;
    background-color: rgb(200,100,250);
  }
  @-webkit-keyframes rotation {
    from {-webkit-transform: rotate(0deg);}
    to {-webkit-transform: rotate(360deg);}
  }
  @-moz-keyframes rotation {
    from {-moz-transform: rotate(0deg);}
    to {-moz-transform: rotate(360deg);}
  }
  @-o-keyframes rotation {
    from {-o-transform: rotate(0deg);}
    to {-o-transform: rotate(360deg);}
  }
  @keyframes rotation {
    from {transform: rotate(0deg);}
    to {transform: rotate(360deg);}
  }

</style>
<script src="https://cdn.plot.ly/plotly-2.17.1.min.js"></script><p><label for="int-n">Qualification Sample Size (<span class="math inline">\(n\)</span>):</label>
<input type="number" id="int-n" min="3" value="18" step="1" required onchange="this.value = Math.max(3, parseInt(this.value));"><br></p>
<p><label for="int-m">Equivalency Sample Size (<span class="math inline">\(m\)</span>):</label>
<input type="number" id="int-m" min="3" value="8" step="1" required onchange="this.value = Math.max(3, parseInt(this.value));"><br></p>
<p><label for="double-alpha">Significance (<span class="math inline">\(\alpha\)</span>):</label>
<input type="number" id="double-alpha" value="0.05" step="0.01" required onchange="this.value = Math.max(0.0001, Math.min(0.5, parseFloat(this.value)));"><br></p>
<figure style="overflow:visible;" id="spinner"><div class="spinner">

</div>
<center style="margin-top:0.5em">
<strong>emscripten</strong>
</center>
</figure><div id="status" class="emscripten">
Downloading…
</div>
<div class="emscripten">
<p><progress value="0" max="100" id="progress" hidden="1"></progress></p>
</div>
<script type="text/javascript">
  var statusElement = document.getElementById('status');
  var progressElement = document.getElementById('progress');
  var spinnerElement = document.getElementById('spinner');

  var Module = {
    preRun: [],
    postRun: [],
    print: (function() {})(),
    canvas: (function() {})(),
    setStatus: function(text) {
      if (!Module.setStatus.last) Module.setStatus.last = { time: Date.now(), text: '' };
      if (text === Module.setStatus.last.text) return;
      var m = text.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);
      var now = Date.now();
      if (m && now - Module.setStatus.last.time < 30) return; // if this is a progress update, skip it if too soon
      Module.setStatus.last.time = now;
      Module.setStatus.last.text = text;
      if (m) {
        text = m[1];
        progressElement.value = parseInt(m[2])*100;
        progressElement.max = parseInt(m[4])*100;
        progressElement.hidden = false;
        spinnerElement.hidden = false;
      } else {
        progressElement.value = null;
        progressElement.max = null;
        progressElement.hidden = true;
        if (!text) spinnerElement.hidden = true;
      }
      statusElement.innerHTML = text;
    },
    totalDependencies: 0,
    monitorRunDependencies: function(left) {
      this.totalDependencies = Math.max(this.totalDependencies, left);
      Module.setStatus(left ? 'Preparing... (' + (this.totalDependencies-left) + '/' + this.totalDependencies + ')' : 'All downloads complete.');
    }
  };
  Module.setStatus('Downloading...');
  window.onerror = function() {
    Module.setStatus('Exception thrown, see JavaScript console');
    spinnerElement.style.display = 'none';
    Module.setStatus = function(text) {
      if (text) console.error('[post-exception status] ' + text);
    };
  };
</script><script src="webcmstatrExt.js" async></script><script src="webcmstatrExt-api.js"></script><button id="compute-factors">
Compute Factors
</button>
<p><br></p>
</div>
<div class="section level3">
<h3 id="factors">Factors<a class="anchor" aria-label="anchor" href="#factors"></a>
</h3>
<textarea id="output" readonly style="width: 400px; height: 100px;"></textarea><p><br></p>
</div>
<div class="section level3">
<h3 id="power-for-reduction-in-mean">Power for Reduction in Mean<a class="anchor" aria-label="anchor" href="#power-for-reduction-in-mean"></a>
</h3>
<label for="keep-power">Keep Power Curves</label>
<input type="checkbox" id="keep-power" checked><br><div id="power-plot" style="width:600px;height:300px;">

</div>
<script type="text/javascript">
  document.getElementById("int-n").addEventListener("input",
    (e) => validateSampleSize(e.target));
  document.getElementById("int-m").addEventListener("input",
    (e) => validateSampleSize(e.target));
  document.getElementById("double-alpha").addEventListener("input",
    (e) => validateSignificance(e.target));

  let power_curves = [];
  
  document.getElementById("compute-factors").addEventListener("click", async () => {
    let k1 = 0.;
    let k2 = 0.;
    const outArea = document.getElementById("output");
    const iN = validateSampleSize(document.getElementById("int-n"));
    const iM = validateSampleSize(document.getElementById("int-m"));
    const fA = validateSignificance(document.getElementById("double-alpha"));

    outArea.value = "";
    if(iN === "invalid" || iM === "invalid" || fA === "invalid") {
      console.log("Invalid input");
      return;
    }

    Module.setStatus("Calculating factors... (1/2)");

    // run the rest asyncronously
    setTimeout(function () {
      const factor_result = k_equiv_two_sample(Module, iN, iM, fA);
      k1 = factor_result.k1;
      k2 = factor_result.k2;

      outArea.value =
        `Factors for: alpha = ${fA}, n = ${iN}, m = ${iM}\nk1 = ${k1.toFixed(4)}\nk2 = ${k2.toFixed(4)}`;

      const power_result = power_mean(Module, iN, iM, k1, k2);

      var trace1 = {
        x: power_result.power_x,
        y: power_result.power_y,
        type: 'lines+markers',
        name: `n=${iN}, m=${iM}, alpha=${fA}`
      };
      
      const keep_power_elm = document.getElementById("keep-power");
      if(keep_power_elm.checked !== true) {
        power_curves = [];
      }
      power_curves.push(trace1);
      var layout = {
        xaxis: {
          title: 'Reduction in Mean (x SD)'
        },
        yaxis: {
          title: 'Rejection Rate'
        }
      };
      Plotly.newPlot('power-plot', power_curves, layout);

      Module.setStatus("");
    },
    0);
  });
</script>
</div>
</div>
<div class="section level2 tabset">
<h2 class="tabset" id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a>
</h2>


<ul class="nav nav-tabs" id="details" role="tablist">
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#method-details" id="method-details-tab" type="button" role="tab" aria-controls="method-details" aria-selected="true" class="active nav-link">Method Details</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#software-details" id="software-details-tab" type="button" role="tab" aria-controls="software-details" aria-selected="false" class="nav-link">Software Details</button></li>
</ul>
<div class="tab-content">
<div class="active  tab-pane" id="method-details" role="tabpanel" aria-labelledby="method-details-tab">

<p>Based on a user selected qualification sample size (<span class="math inline">\(n\)</span>), equivalency sample size (<span class="math inline">\(m\)</span>) and significance level (<span class="math inline">\(\alpha\)</span>), the factors <span class="math inline">\(k_1\)</span> and <span class="math inline">\(k_2\)</span> are calculated. Equivalency limits
are set as:</p>
<p><span class="math display">\[
W_{min\,indiv} = \bar{x} - k_1 \cdot s \\
W_{avg} = \bar{x} - k_2 \cdot s
\]</span></p>
<p>The power of this equivalency criteria is investigated through
simulation. In this simulation, 2500 qualification samples are drawn
from a standard normal distribution (<span class="math inline">\(N(\mu,
\sigma)\)</span>) and equivalency limits are computed based on each
qualification sample. Next 2500 equivalency samples are drawn from a
<span class="math inline">\(N(\mu-\delta\sigma, \sigma)\)</span>
distribution. Each of the equivalency samples are compared against each
of the equivalency limits and the proportion of equivalency samples
rejected are reported. Thus, a total of 6,250,000 comparisons are made.
This is repeated for several values of <span class="math inline">\(\delta\)</span>.</p>
</div>
<div class="tab-pane" id="software-details" role="tabpanel" aria-labelledby="software-details-tab">

<p>The functionality of this page is provided by the same C++ code that
is used by the <code>cmstatrExt</code> R package. This code is compiled
to WebAssembly so that it can run inside a web browser without the user
installing any special software. This software is licensed under the <a href="https://www.r-project.org/Licenses/AGPL-3" class="external-link">AGPL-3</a> license.
Source code is available <a href="https://github.com/cmstatr/cmstatrExt" class="external-link">here</a>.</p>
<p>Graphing is provided by the <a href="https://plotly.com/javascript/" class="external-link">Plotly JavaScript library</a>,
which is licensed under the MIT license.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.kloppenborg.ca" class="external-link">Stefan Kloppenborg</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
